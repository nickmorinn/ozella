{%- liquid
  assign main_menu = linklists[section.settings.main_menu_link_list]
  assign toolbar_menu = linklists[section.settings.toolbar_menu]

  assign logo_alignment = 'left'
  if section.settings.main_menu_alignment == 'center-left' or section.settings.main_menu_alignment == 'center-split' or section.settings.main_menu_alignment == 'center' or section.settings.main_menu_alignment == 'center-drawer'
    assign logo_alignment = 'center'
  endif

  assign dropdown_alignment = 'left'
  if section.settings.main_menu_alignment == 'left-center' or section.settings.main_menu_alignment == 'center-split' or section.settings.main_menu_alignment == 'center'
    assign dropdown_alignment = 'center'
  endif

  assign template_name = template | replace: '.', ' ' | truncatewords: 2, '' | handle

  assign sticky_header = false
  if section.settings.header_style == 'sticky'
    assign sticky_header = true
  endif
  assign overlay_header = false
  if template_name == 'index' and section.settings.sticky_index
    assign overlay_header = true
  endif
  if template_name contains 'collection' and collection.image and section.settings.sticky_collection
    assign overlay_header = true
  endif

  assign shop_link_url = '/collections/all'
  assign contact_link_url = '/pages/contact'
  for link in main_menu.links
    assign link_title_handle = link.title | handleize
    if link_title_handle contains 'shop'
      assign shop_link_url = link.url
    endif
    if link_title_handle contains 'contact'
      assign contact_link_url = link.url
    endif
  endfor
-%}

{%- render 'drawer-menu',
  section: section,
  main_menu: main_menu,
  toolbar_menu: toolbar_menu,
  logo_alignment: logo_alignment
-%}
{%- render 'cart-drawer' -%}

<style>
  .site-nav__link,
  .site-nav__dropdown-link:not(.site-nav__dropdown-link--top-level) {
    font-size: {{ settings.type_navigation_size }}px;
  }
  {% if settings.type_navigation_capitalize %}
    .site-nav__link, .mobile-nav__link--top-level {
      text-transform: uppercase;
      letter-spacing: 0.2em;
    }
    .mobile-nav__link--top-level {
      font-size: 1.1em;
    }
  {% endif %}

  {% if main_menu.links.size > 6 %}
    .site-nav__link {
      padding-left: 10px;
      padding-right: 10px;
    }
  {% endif %}

  {% unless section.settings.mega_menu_images %}
    .megamenu__collection-image {
      display: none;
    }
  {% endunless %}

  {%- if settings.color_header == settings.color_body_bg or settings.color_body_bg contains settings.color_header -%}
    .toolbar + .header-sticky-wrapper .site-header {
      border-top: 0;
    }
  {%- endif -%}

  .header-wrapper,
  .header-wrapper--sticky,
  .site-header,
  .site-header--stuck,
  .site-header--opening {
    background: transparent !important;
    border: 0 !important;
    box-shadow: none !important;
  }

  .header-wrapper,
  .header-wrapper--sticky {
    left: auto !important;
    position: relative !important;
    right: auto !important;
    top: auto !important;
    width: 100%;
    z-index: 30;
  }

  .header-sticky-wrapper {
    position: relative;
    z-index: 30;
  }

  .site-header,
  .site-header--stuck,
  .site-header--opening {
    transition: none !important;
  }

  .site-header--stuck {
    transform: translateZ(0) !important;
  }

  .oz-header {
    align-items: center;
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    min-height: 72px;
    width: 100%;
  }

  .oz-header__left,
  .oz-header__right {
    align-items: center;
    display: flex;
  }

  .oz-header__right {
    justify-content: flex-end;
  }

  .oz-header__center {
    align-items: center;
    display: flex;
    justify-content: center;
  }

  .oz-header__center .site-header__logo {
    margin: 0 !important;
  }

  .oz-header__left-links,
  .oz-header__right-links {
    align-items: center;
    display: flex;
    gap: 22px;
    white-space: nowrap;
  }

  .oz-header__link {
    color: var(--colorNavText);
    display: inline-block;
    font-family: var(--typeAccentPrimary), var(--typeAccentFallback);
    font-size: 14px;
    letter-spacing: 0.08em;
    line-height: 1;
    position: relative;
    text-decoration: none;
    text-transform: uppercase;
    top: var(--typeAccentOpticalShift);
  }

  .oz-header__button {
    background: transparent;
    border: 0;
    cursor: pointer;
    padding: 0;
  }

  .oz-header__button:hover,
  .oz-header__link:hover {
    color: var(--colorNavText);
  }

  .oz-header__menu,
  .oz-header__mobile-cart {
    display: none;
  }

  .site-header {
    padding: 0;
  }

  @media only screen and (max-width: 768px) {
    .oz-header {
      min-height: 58px;
    }

    .oz-header__left-links,
    .oz-header__right-links {
      display: none;
    }

    .oz-header__menu,
    .oz-header__mobile-cart {
      display: inline-block;
      white-space: nowrap;
    }

    .oz-header__link {
      font-size: 16px;
      letter-spacing: 0.1em;
    }
  }
</style>

<div data-section-id="{{ section.id }}" data-section-type="header">
  <div class="header-sticky-wrapper">
    <div id="HeaderWrapper" class="header-wrapper{% if overlay_header %} header-wrapper--sticky is-light{% endif %}">
      <header
        id="SiteHeader"
        class="site-header{% if settings.type_navigation_style == 'heading' %} site-header--heading-style{% endif %}"
        data-sticky="true"
        data-overlay="{{ overlay_header }}">
        <div class="page-width">
          <div class="oz-header" data-logo-align="center">
            <div class="oz-header__left">
              <nav class="oz-header__left-links small--hide" role="navigation" aria-label="Primary">
                <a href="{{ shop_link_url }}" class="oz-header__link">SHOP</a>
                <a href="{{ contact_link_url }}" class="oz-header__link">CONTACT US</a>
              </nav>
              <button
                type="button"
                class="oz-header__link oz-header__button oz-header__menu js-drawer-open-nav medium-up--hide"
                aria-controls="NavDrawer">
                MENU
              </button>
            </div>

            <div class="oz-header__center">
              <div class="header-item header-item--logo">
                {%- render 'header-logo-block', section: section -%}
              </div>
            </div>

            <div class="oz-header__right">
              <div class="oz-header__right-links small--hide">
                {%- if shop.customer_accounts_enabled -%}
                  <a class="oz-header__link" href="{{ routes.account_url }}">
                    {%- if customer -%}
                      {{ 'layout.customer.account' | t }}
                    {%- else -%}
                      {{ 'layout.customer.log_in' | t }}
                    {%- endif -%}
                  </a>
                {%- endif -%}
                <a href="{{ routes.cart_url }}" class="oz-header__link js-drawer-open-cart" aria-controls="CartDrawer">
                  CART(<span class="cart-link__bubble-num">{{ cart.item_count }}</span>)
                </a>
              </div>

              <a href="{{ routes.cart_url }}" class="oz-header__link oz-header__mobile-cart js-drawer-open-cart medium-up--hide" aria-controls="CartDrawer">
                CART(<span class="cart-link__bubble-num">{{ cart.item_count }}</span>)
              </a>
            </div>
          </div>
        </div>
        <div class="site-header__search-container">
          <div class="site-header__search">
            <div class="page-width">
              {% render 'predictive-search', context: 'header' %}
            </div>
          </div>
        </div>
      </header>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "t:sections.header.name",
  "settings": [
    {
      "type": "link_list",
      "id": "main_menu_link_list",
      "label": "t:sections.header.settings.main_menu_link_list.label",
      "default": "main-menu"
    },
    {
      "type": "checkbox",
      "id": "hover_menu",
      "label": "t:sections.header.settings.hover_menu.label",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "mega_menu_images",
      "label": "t:sections.header.settings.mega_menu_images.label",
      "default": true,
      "info": "t:sections.header.settings.mega_menu_images.info"
    },
    {
      "type": "select",
      "id": "main_menu_alignment",
      "label": "t:sections.header.settings.main_menu_alignment.label",
      "default": "left",
      "options": [
        {
          "value": "left",
          "label": "t:sections.header.settings.main_menu_alignment.options.left.label"
        },
        {
          "value": "left-center",
          "label": "t:sections.header.settings.main_menu_alignment.options.left-center.label"
        },
        {
          "value": "left-drawer",
          "label": "t:sections.header.settings.main_menu_alignment.options.left-drawer.label"
        },
        {
          "value": "center-left",
          "label": "t:sections.header.settings.main_menu_alignment.options.center-left.label"
        },
        {
          "value": "center-split",
          "label": "t:sections.header.settings.main_menu_alignment.options.center-split.label"
        },
        {
          "value": "center",
          "label": "t:sections.header.settings.main_menu_alignment.options.center.label"
        },
        {
          "value": "center-drawer",
          "label": "t:sections.header.settings.main_menu_alignment.options.center-drawer.label"
        }
      ]
    },
    {
      "type": "select",
      "id": "header_style",
      "label": "t:sections.header.settings.header_style.label",
      "default": "normal",
      "options": [
        {
          "value": "normal",
          "label": "t:sections.header.settings.header_style.options.normal.label"
        },
        {
          "value": "sticky",
          "label": "t:sections.header.settings.header_style.options.sticky.label"
        }
      ]
    },
    {
      "type": "checkbox",
      "id": "sticky_index",
      "label": "t:sections.header.settings.sticky_index.label",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "sticky_collection",
      "label": "t:sections.header.settings.sticky_collection.label",
      "info": "t:sections.header.settings.sticky_collection.info",
      "default": false
    },
    {
      "type": "header",
      "content": "t:sections.header.settings.header_toolbar"
    },
    {
      "type": "link_list",
      "id": "toolbar_menu",
      "label": "t:sections.header.settings.toolbar_menu.label",
      "info": "t:sections.header.settings.toolbar_menu.info"
    },
    {
      "type": "checkbox",
      "id": "toolbar_social",
      "label": "t:sections.header.settings.toolbar_social.label"
    },
    {
      "type": "header",
      "content": "t:sections.header.settings.header_language_selector",
      "info": "t:sections.header.settings.header_language_selector"
    },
    {
      "type": "checkbox",
      "id": "show_locale_selector",
      "label": "t:sections.header.settings.show_locale_selector.label",
      "default": true
    },
    {
      "type": "header",
      "content": "t:sections.header.settings.header_currency_selector",
      "info": "t:sections.header.settings.header_currency_selector"
    },
    {
      "type": "checkbox",
      "id": "show_currency_selector",
      "label": "t:sections.header.settings.show_currency_selector.label",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_currency_flags",
      "label": "t:sections.header.settings.show_currency_flags.label",
      "default": true
    }
  ],
  "blocks": [
    {
      "type": "logo",
      "name": "t:sections.header.blocks.logo.name",
      "limit": 1,
      "settings": [
        {
          "type": "image_picker",
          "id": "logo",
          "label": "t:sections.header.blocks.logo.settings.logo.label"
        },
        {
          "type": "image_picker",
          "id": "logo-inverted",
          "label": "t:sections.header.blocks.logo.settings.logo-inverted.label",
          "info": "t:sections.header.blocks.logo.settings.logo-inverted.info"
        },
        {
          "type": "range",
          "id": "desktop_logo_width",
          "label": "t:sections.header.blocks.logo.settings.desktop_logo_width.label",
          "default": 200,
          "min": 100,
          "max": 400,
          "step": 10,
          "unit": "px"
        },
        {
          "type": "range",
          "id": "mobile_logo_width",
          "label": "t:sections.header.blocks.logo.settings.mobile_logo_width.label",
          "default": 140,
          "min": 60,
          "max": 200,
          "step": 10,
          "unit": "px",
          "info": "t:sections.header.blocks.logo.settings.mobile_logo_width.info"
        }
      ]
    }
  ],
  "default": {
    "settings": {}
  },
  "disabled_on": {
    "groups": ["footer", "custom.popups"]
  }
}
{% endschema %}
