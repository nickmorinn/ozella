{% doc %}
  Copyright Â© 2025 Archetype Themes LP. All rights reserved.

  Renders the buy buttons for the product, including add to cart and dynamic checkout options.

  This component creates a product form with both standard "Add to Cart" functionality and
  Shopify's dynamic checkout buttons (Shop Pay, Apple Pay, Google Pay, etc.) when enabled.

  @param {object} product - A product object
  @param {boolean} [enable_dynamic_checkout] - Whether to show dynamic checkout buttons (default: true)

  @example
  {% render 'section.flex-pdp.buy-buttons', enable_dynamic_checkout: true, product: closest.product %}
{% enddoc %}

{%- liquid
  assign form_id = 'section.flex-pdp.form-' | append: section.id
-%}

{% capture product_add_to_cart_content %}
  {% if product.selected_or_first_available_variant.available %}
    {% render 'element.button', text: 'Add to Cart', type: 'submit', full: true %}
  {% else %}
    {% render 'element.button', text: 'Sold Out', type: 'submit', disabled: true, full: true %}
  {% endif %}
  {% render 'form.product.messages', id: form_id %}
{% endcapture %}

{% capture product_add_to_cart_stack %}
  {% render 'layout.stack', gap: 'xs', slot: product_add_to_cart_content, align: 'center' %}
{% endcapture %}

{% capture product_buy_buttons %}
  {{ product_add_to_cart_stack }}
{%  endcapture %}

{% render 'layout.stack', gap: 'xs', slot: product_buy_buttons %}
